@import url("https://use.typekit.net/uva6amx.css");

:root {
    --theme-page-bg-image-base: url("https://www.dndbeyond.com/attachments/0/84/background_texture.png");
    --content-max: 2200px;
    --overlap-left: 400px;
    --overlap-right: 200px;
    --half-gutter: calc((100vw - var(--content-max))/2);
    --right-bg-width-narrow: clamp(200px, 20vw, 600px);
    --left-bg-width-narrow: clamp(200px, 20vw, 600px);
    --right-bg-width-wide: clamp(200px, 25vw, 900px);
    --left-bg-width-wide: clamp(200px, 25vw, 900px);

    --theme-table-row-bg-hover: rgba(204, 153, 102, 0.3);
    --theme-table-row-bg-dark: #d9e1ce;
    --theme-table-row-bg-light: #f1f4ee;
    --compendium-rules-sidebar-color: #d8e3e3;
    --compendium-quote-box-color: #d5dbd4;
    --compendium-quote-box-border: #425e47;
    --compendium-quote-box-corner: #425e47;
    --header-underline: #dc9d4e;
    --sidebar-active-border: #549d60;
    --sidebar-hover-border: #305b37;
    --sidebar-active-bg: #99ce85;
    --sidebar-hover-bg: #96c592;
    --nav-to-top-bg: #549d60;
    --nav-to-top-hover-bg: #427c4c;
    --theme-image-caption-link-bg-color: #549d60;
    --theme-image-caption-link-hover-color: #427c4c;
    --compendium-default-tooltip: #11884C;
    --compendium-rule-tooltip: #9B740B;
    --compendium-item-tooltip: #774521;
    --compendium-condition-tooltip: #5a8100;
    --compendium-sense-tooltip: #A41B96;
    --compendium-link-color: #006ABE;
    --compendium-link-contrast: #0053A3;
    --nav-comp-icon: url("https://media.dndbeyond.com/compendium-images/components/gold-comp-icon.svg");
    --nav-prev-icon: url("https://media.dndbeyond.com/compendium-images/components/gold-chevron-left.svg");
    --nav-next-icon: url("https://media.dndbeyond.com/compendium-images/components/gold-chevron-right.svg");
    --nav-active-text: #3c3c3c;
    --nav-hover-text: #1d1d1d;

    --unique-book-font-alt: 'ITC Benguiat Book';
    --unique-book-font-label: Handwriting Font;
    --translate-button-on: #dc9d4e;
    --wheat-core-h-red: #4A0E0B;
    --wheat-core-ch-title-outline: #C9D3CA;
    --wheat-core-beige: #C3B272;

    --wheat-title-gradient: linear-gradient(0, #945c48, var(--wheat-core-h-red));
}

@font-face {
    font-family: 'darka';
    src: url('https://use.typekit.net/uva6amx.css');
    font-weight: normal;
    font-style: normal;
}

@font-face {
    font-family: 'Raven Hell';
    src: url('https://fonts.dndbeyond.com/RavenHellRegularGothic-8795091.otf');
    font-weight: normal;
    font-style: normal;
}

h1 {
    font-family: "darka", sans-serif;
    --h1-font-size: 6rem;
    --h1-underline: transparent;
    color: white !important;
    z-index: 18;
    line-height: 0.9;
    text-align: center;
}

h1 span:first-of-type {
    font-size: 3rem;
    line-height: 0.8;
}


h1 {
    font-family: "darka", sans-serif;
    --h1-font-size: 8rem;
    --h1-underline: transparent;
}

.dark-lords {
    font-family: "darka", sans-serif;
    --h2-font-size: 8rem;
    --header-underline: transparent;
    --theme-page-h2-color: white !important;
}

h2 {
    font-family: "Raven Hell", sans-serif;
    --h2-font-size: 2rem;
    --header-underline: transparent;
    --theme-page-h2-color: #618E39 !important;
}

h3 {
    font-family: "Raven Hell", sans-serif;
    --h3-underline: #618E39 !important;
    --theme-page-h3-color: #618E39 !important;
}

h4 {
    font-family: "Raven Hell", sans-serif;
    --theme-page-h4-color: #618E39 !important;
}

h5 {
    font-family: "Raven Hell", sans-serif;
    --theme-page-h5-color: #618E39 !important;
}

.secondary-content {
    display: none;
}

.primary-content {
    max-width: 100% !important;
    /* overflow: hidden; */
}

html body #site-main .container {
    max-width: var(--content-max) !important;
}

/* Layout keep sections in normal document flow */
.lk-book {
    /* optional: page snapping feel */
    scroll-snap-type: y proximity;
}

.b-breadcrumb {
    display: none;
}

.p-article-header {
    display: none;
}

/* optional: smooth anchor jumps */
html {
    scroll-behavior: smooth;
}

header.page-header {
    display: none !important;
}

div.container {
    padding: 0 !important;
}

.body-page-details #site.two-column.section-compendium-content #content {
    padding: 0 !important;
}

.lk-page__split-title {
    scroll-snap-align: start;
    --header-height: 110px;
    --split-text-window-height: 600px;
    --split-text-window-width: 650px;
    --split-text-window-mask-width: var(--split-text-window-width);
    --split-text-window-y: 70%;
    --split-text-window-x: 50%;
    --split-overlay-height: calc(100vh + var(--header-height));
    --split-text-content-padding-top: 20rem;
    --split-text-content-padding-bottom: 8rem;
    min-height: 100vh;

    --split-text-content-left: calc(var(--split-text-window-x) + 50px);

    //frame locators
    --frame-height-offset: 29px;
    --split-text-frame-top: calc((var(--split-text-window-y) / 2) - (3 * var(--frame-height-offset)));
    --split-text-frame-left: calc(var(--split-text-window-x) - 325px);
    --split-text-frame-width: var(--split-text-window-width);
    --split-text-frame-height: calc(var(--split-text-window-height) + var(--frame-height-offset)) !important;
}

.lk-split-title__container {
    position: relative;
    isolation: isolate;
    display: grid;
    grid-template-columns: [full] minmax(0, 1fr);
}

.lk-split-title__underlay,
.lk-split-title__overlay,
.lk-split-title__content {
    grid-column: 1 / -1;
    grid-row: 1;
}

.lk-split-title__underlay {
    position: sticky;
    top: 0;
    align-self: start;
    justify-self: stretch;
    display: grid;
    grid-template-columns: 2fr 3fr;
    width: 100%;
    height: var(--split-overlay-height) !important;
    max-height: 100vh;
    pointer-events: none;
    z-index: 1;
}

.lk-split-title__gradient {
    content: "";
    grid-column: 2;
    position: absolute;
    width: var(--split-text-window-width);
    height: calc(var(--split-text-window-height) + 20px) !important;
    top: calc(var(--split-text-frame-top) - 20px);
    left: var(--split-text-frame-left);
    /* Top layer = pink pulse (confined to the text window)
     Bottom layer = gray bottom fade (covers entire underlay) */
    background-image:
        /* 1) pink pulse */
        linear-gradient(to top,
            rgba(232, 0, 128, 0) 0%,
            rgba(232, 0, 128, 0) 86%,
            rgba(232, 0, 128, 0.225) 90%,
            rgba(232, 0, 128, 0) 95.5%,
            rgba(232, 0, 128, 0) 100%),
        /* 2) gray bottom fade */
        linear-gradient(to top,
            rgba(230, 227, 227, 1) 0%,
            rgba(230, 227, 227, 1) 80.5%,

            rgba(230, 227, 227, 1) 88.5%,
            rgba(230, 227, 227, 0) 98%,
            rgba(230, 227, 227, 0) 100%);
}

.lk-split-title-underlay__img_bg {
    grid-column: 2;
    width: 100%;
    height: var(--split-overlay-height) !important;
    max-height: 100vh;
    object-fit: cover;
}

.lk-split-title__overlay {
    position: sticky;
    top: 0;
    align-self: start;
    justify-self: stretch;
    width: 100%;
    height: var(--split-overlay-height) !important;
    max-height: 100vh;
    object-fit: cover;
    pointer-events: none;
    z-index: 5;
    display: grid;
    grid-template-columns: 2fr 3fr;
}

.lk-split-title__page-header {
    grid-column: 2;
    margin: clamp(3rem, 8vh, 8%) auto 0;
    text-align: center;
    color: white !important;
    z-index: 10;
    pointer-events: none;
}

.lk-split-title__page-header+.lk-split-title__page-header {
    margin-top: 1.25rem;
}

.lk-split-title-overlay__img_side {
    grid-column: 1;
    width: 100%;
    height: var(--split-overlay-height) !important;
    max-height: 100vh;
    object-fit: cover;
    position: relative;
    z-index: 2;
}

.lk-split-title-overlay__img_fg {
    grid-column: 2;
    position: absolute;
    top: 0;
    width: 100%;
    height: var(--split-overlay-height) !important;
    max-height: 100vh;
    object-fit: cover;
    /* ensure it covers the viewport */
    pointer-events: none;

    /* Layer 1: full-rect white (base) - shows everything
     Layer 2: WHITE square - subtract this to make the hole */
    -webkit-mask-image: linear-gradient(#fff, #fff),
        url("./assets/ui/Square-White.svg");
    /* must be WHITE in the square area */
    mask-image: linear-gradient(#fff, #fff),
        url("./assets/ui/Square-White.svg");

    -webkit-mask-repeat: no-repeat, no-repeat;
    mask-repeat: no-repeat, no-repeat;

    -webkit-mask-position: center, left var(--split-text-window-x) top var(--split-text-window-y);
    mask-position: center, left var(--split-text-window-x) top var(--split-text-window-y);

    -webkit-mask-size: 100% 100%, var(--split-text-window-mask-width) var(--split-text-window-height);
    /* hole size = 150×150 */
    mask-size: 100% 100%, var(--split-text-window-mask-width) var(--split-text-window-height);

    /* KEY: subtract the 2nd mask from the 1st */
    -webkit-mask-composite: xor;
    /* Chrome/Safari */
    mask-composite: exclude;
    /* Firefox */

    mask-mode: luminance;
    /* interpret white as visible, black as transparent */
    z-index: 1;
}

.lk-split-title-overlay__img_frame {
    grid-column: 2;
    position: absolute;
    top: var(--split-text-frame-top);
    left: var(--split-text-frame-left);
    width: var(--split-text-frame-width);
    height: var(--split-text-frame-height) !important;
    z-index: 12;

    -webkit-mask-image: linear-gradient(to top,
            rgba(0, 0, 0, 1) 0%,
            /* fully visible at bottom */
            rgba(0, 0, 0, 1) 89%,
            rgba(0, 0, 0, 0) 95%,
            /* stay visible until 80% */
            rgba(0, 0, 0, 0) 100%
            /* fade to transparent at the top */
        );
    mask-image: linear-gradient(to top,
            rgba(0, 0, 0, 1) 0%,
            rgba(0, 0, 0, 1) 89%,
            rgba(0, 0, 0, 0) 95%,
            rgba(0, 0, 0, 0) 100%);

    -webkit-mask-mode: alpha;
    mask-mode: alpha;
}


.lk-page-overlay__img_bg {
    position: sticky;
    top: 0;
    width: 100%;
    height: var(--split-overlay-height) !important;
    max-height: 100vh;
    object-fit: cover;
    pointer-events: none;
    z-index: 1;
}

.lk-split-title__content {
    position: relative;
    align-self: start;
    justify-self: start;
    z-index: 3;
    margin-left: clamp(0px,
            var(--split-text-content-left),
            calc(100% - var(--split-text-window-width)));
    margin-top: 0;
    width: min(var(--split-text-window-width), calc(100% - 32px));
    min-height: var(--split-text-window-height);
    backdrop-filter: blur(4px);
    border-radius: 12px;
    padding: var(--split-text-content-padding-top) 2rem var(--split-text-content-padding-bottom) 2rem;
    box-shadow: 0 8px 24px rgba(0, 0, 0, .15);
    padding-bottom: var(--split-text-content-padding-bottom);
    -webkit-mask-image: linear-gradient(to top,
            rgba(0, 0, 0, 1) 0%,
            /* fully visible at bottom */
            rgba(0, 0, 0, 1) 95%,
            rgba(0, 0, 0, 0) 98%,
            /* stay visible until 80% */
            rgba(0, 0, 0, 0) 100%
            /* fade to transparent at the top */
        );
    mask-image: linear-gradient(to top,
            rgba(0, 0, 0, 1) 0%,
            rgba(0, 0, 0, 1) 95%,
            rgba(0, 0, 0, 0) 98%,
            rgba(0, 0, 0, 0) 100%);

}

@media (max-width: 1200px) {

    .lk-split-title__content {
        margin-left: auto;
        margin-right: auto;
        width: min(var(--split-text-window-width), calc(100% - 32px));
    }
}

.lk-split-title__page-header {
    position: relative;
    z-index: 10;
    grid-column: 2;
    margin: clamp(3rem, 8vh, 8%) auto 0;
    text-align: center;
    color: white !important;
}

//STRAHD PAGE CUSTOMIZATIONS

.lk-page__split-title#strahd-page {
    --split-content-pane: clamp(320px, 40vw, 900px);
    --split-text-content-left: clamp(48px, 12vw, 25%);
    --split-text-window-width: min(var(--split-content-pane), calc(100% - var(--split-text-content-left) - 32px));
    --split-text-window-x: calc(var(--split-text-content-left) + (var(--split-text-window-width) / 2));
    --split-text-frame-left: var(--split-text-content-left);
}

.lk-page__split-title#strahd-page .lk-split-title__page-header {
    grid-column: 1;
    position: absolute;
    z-index: 15;
    top: clamp(4rem, 11.5vh, 20%);
    left: calc(var(--split-text-content-left) + var(--split-text-window-width) / 2);
    transform: translateX(-50%);
    // width: var(--split-text-window-width);
    line-height: 0.8;
}

.lk-page__split-title#strahd-page .lk-split-title__content {
    padding: calc(var(--split-text-content-padding-top)* 0.8) 2rem var(--split-text-content-padding-bottom) 2rem !important;
}

.lk-page__split-title#strahd-page {
    color: white
}

.lk-page__split-title#strahd-page .lk-split-title__underlay {
    grid-template-columns: 3fr 2fr;
}

.lk-page__split-title#strahd-page .lk-split-title__overlay {
    grid-template-columns: 3fr 2fr;
}

.lk-page__split-title#strahd-page .lk-split-title-overlay__splotch-container_top {
    overflow: visible;

}

.lk-page__split-title#strahd-page .lk-split-title-splotch-top {
    overflow: visible;
    width: 100%;
    margin-top: -28.9%;
    margin-right: unset;

}

.lk-page__split-title#strahd-page .lk-split-title-overlay__img_side {
    grid-column: 2;
}

.lk-page__split-title#strahd-page .lk-split-title__gradient {
    grid-column: 1;
}

.lk-page__split-title#strahd-page .lk-split-title-overlay__img_fg {
    grid-column: 1;
    left: 0;
    right: auto;
    width: calc(var(--split-text-content-left) + var(--split-text-window-width) + 124px);
}

.lk-page__split-title#strahd-page .lk-split-title-overlay__img_frame {
    grid-column: 1;
}

.lk-page__split-title#strahd-page .lk-split-title-underlay__img_bg {
    grid-column: 1;
}

//BAROVIA PAGE CUSTOMIZATIONS
.lk-page__split-title#barovia-page {
    --split-content-pane: clamp(320px, 40vw, 900px);
    --split-text-content-left: clamp(48px, 12vw, 25%);
    --split-text-window-width: min(var(--split-content-pane), calc(66% - var(--split-text-content-left) - 32px));
    --split-text-window-x: calc(var(--split-text-content-left));

}

.lk-page__split-title#barovia-page .lk-split-title__underlay,
.lk-page__split-title#barovia-page .lk-split-title__overlay {
    grid-template-columns: 1fr;
}

.lk-page__split-title#barovia-page .lk-split-title-underlay__img_bg {
    grid-column: 1 / -1;
}

.lk-page__split-title#barovia-page .lk-split-title__gradient {
    grid-column: 1;
    width: calc(var(--split-text-window-width) + 325px);
    background-image:
        /* 1) pink pulse */
        linear-gradient(to top,
            rgba(232, 0, 128, 0) 0%,
            rgba(232, 0, 128, 0) 86%,
            rgba(232, 0, 128, 0.225) 90%,
            rgba(232, 0, 128, 0) 95.5%,
            rgba(232, 0, 128, 0) 100%),
        /* 2) gray bottom fade */
        linear-gradient(to top,
            rgba(230, 227, 227, 0.75) 0%,
            rgba(230, 227, 227, 0.75) 80.5%,

            rgba(230, 227, 227, 0.75) 88.5%,
            rgba(230, 227, 227, 0) 98%,
            rgba(230, 227, 227, 0) 100%);
}

.lk-page__split-title#barovia-page .lk-split-title-overlay__img_frame {
    grid-column: 1;
    left: var(--split-text-content-left);
}



.lk-page__split-title#barovia-page .lk-split-title__page-header {
    grid-column: 1;
    position: absolute;
    z-index: 15;
    top: clamp(4rem, 11vh, 20%);
    left: calc(var(--split-text-content-left) + (var(--split-text-window-width) / 2));
    transform: translateX(-50%);
}

.lk-page__split-title#barovia-page .lk-split-title__content {
    width: var(--split-text-window-width);
    padding: calc(var(--split-text-content-padding-top) * 1) 2rem var(--split-text-content-padding-bottom) 2rem !important;

}

.lk-page__split-title#barovia-page .lk-split-title-overlay__img_fg {
    grid-column: 1 / -1;
    // width: 100%;
}

.lk-page__split-title#barovia-page .lk-split-title-overlay__splotch-container_bottom {
    position: sticky;
    bottom: 0;
    right: 0;
    z-index: 6;
    width: auto;
    height: auto;
}

.lk-page__split-title#barovia-page .lk-split-title-splotch-bottom {
    width: 100%;

}





// TITLE PAGE
.lk-page__title {
    position: relative;
    isolation: isolate;
    scroll-snap-align: start;
    --header-height: 110px;
    --text-window-height: 600px;
    --text-window-width: 600px;
    --text-window-y: 30%;
    --text-window-x: 20%;
    --overlay-height: calc(100vh + var(--header-height));
}

/* Sticky overlay image that covers the viewport while this section is in view */



.lk-page__overlay {
    position: sticky;
    top: 0;
    width: 100%;
    height: var(--overlay-height) !important;
    max-height: 100vh;
    object-fit: cover;
    pointer-events: none;
    z-index: 5;
    margin-top: calc(-1 * 100vh);

}


.lk-page__title .lk-page__overlay h2 {
    position: absolute;
    top: 2%;
    left: calc(var(--text-window-x) / 2);
    z-index: 10;
    color: white !important;
    top: 25px;
}

.lk-split-title-overlay__splotch-container_top {
    position: absolute;
    top: 0;
    right: 0;
    width: auto;
    height: auto;
    z-index: 6;
    overflow: hidden;
    display: flex;
    justify-content: flex-end;
}

.lk-split-title-splotch-top {
    margin-top: -3%;
    margin-right: -12%;
    width: 60%;
    height: auto;
    object-fit: contain;

}


.lk-page-overlay__img_fg {
    position: absolute;
    top: 0;
    width: 100%;
    height: var(--overlay-height) !important;
    max-height: 100vh;
    object-fit: cover;
    /* ensure it covers the viewport */
    pointer-events: none;

    /* Layer 1: full-rect white (base) — shows everything
     Layer 2: WHITE square — subtract this to make the hole */
    -webkit-mask-image: linear-gradient(#fff, #fff),
        url("./assets/ui/Square-White.svg");
    /* must be WHITE in the square area */
    mask-image: linear-gradient(#fff, #fff),
        url("./assets/ui/Square-White.svg");

    -webkit-mask-repeat: no-repeat, no-repeat;
    mask-repeat: no-repeat, no-repeat;

    -webkit-mask-position: center, left var(--text-window-x) top var(--text-window-y);
    mask-position: center, left var(--text-window-x) top var(--text-window-y);

    -webkit-mask-size: 100% 100%, var(--text-window-width) var(--text-window-height);
    /* hole size = 150×150 */
    mask-size: 100% 100%, var(--text-window-width) var(--text-window-height);

    /* KEY: subtract the 2nd mask from the 1st */
    -webkit-mask-composite: xor;
    /* Chrome/Safari */
    mask-composite: exclude;
    /* Firefox */

    mask-mode: luminance;
    /* interpret white as visible, black as transparent */
}

.lk-page-overlay__img_bg {
    position: sticky;
    top: 0;
    width: 100%;
    height: var(--overlay-height) !important;
    max-height: 100vh;
    object-fit: cover;
    pointer-events: none;
    z-index: 1;
}

.page-header {
    max-width: 1800px !important;

}

.p-article-header {
    width: calc(100% - var(--right-bg-width-narrow)) !important;
}



.text--quote-box {
    border-radius: none;
    /* tweak these to taste */
    --paper: #efeadd;
    --hash: #c7c1b4;
    --strip-w: 8px;
    /* width of the hashed strip on each side */
    --dash: 1.5px;
    /* dash thickness */
    --gap: 1.5px;
    /* space between dashes */

    position: relative;
    padding: 1rem;
    padding-left: calc(1rem + var(--strip-w));
    padding-right: calc(1rem + var(--strip-w));
    background-color: var(--paper);
    border-radius: 10px;

    /* two repeating gradients, pinned left and right */
    background-image: repeating-linear-gradient(to bottom,
            var(--hash) 0 var(--dash),
            transparent var(--dash) calc(var(--dash) + var(--gap))),
        repeating-linear-gradient(to bottom,
            var(--hash) 0 var(--dash),
            transparent var(--dash) calc(var(--dash) + var(--gap)));

    background-repeat: no-repeat, no-repeat;
    background-size: var(--strip-w) 100%, var(--strip-w) 100%;
    background-position: left top, right top;

    /* optional subtle depth */
    box-shadow: 0 1px 0 rgba(0, 0, 0, .05), 0 8px 20px rgba(0, 0, 0, .08) inset;

    border-left-style: none;
    border-right-style: none;

    max-width: 600px;

    margin: 12px auto;
}

.text--quote-box::after {
    background-color: transparent;
}

.text--quote-box::before {
    background-color: transparent;
}

.text--quote-box p:first-of-type:before {
    background-color: transparent;
}

.text--quote-box p:last-of-type:after {
    background-color: transparent;
}

.sidebar-menu {
    background-color: transparent;
    background-image: url("https://media-stg.dndbeyond.com/compendium-images/wthc/ui/wthc-nav-bottom.png"),
        url("https://media-stg.dndbeyond.com/compendium-images/wthc/ui/wthc-nav-repeat.png");
    background-position: center bottom,
        center bottom;
    background-repeat: no-repeat,
        repeat-y;
    background-size: 100% auto, 100% auto;
    border: none;
}

.sidebar-menu .sidebar-scroll-menu {
    border: none;
    background-color: transparent;

}

.sidebar-menu-top.show-top,
.sidenav-next-nav,
.sidebar-menu,
.sidebar-menu .quick-menu,
ul.quick-menu.quick-menu-tier-2,
.sidebar-menu .quick-menu * {
    border: none;
    background-color: transparent;
}

.sidebar-menu-top.show-top {
    border-bottom: 1px solid lightgrey;

}