@use "../../../Styles/mixins.scss";
@import '../../../Styles/vars.scss';

$slug-primarycolor: #4A0E0B;
$slug-secondarycolor: #d7e8ee;
:root {
    --theme-page-bg-image-base: url(https://www.dndbeyond.com/attachments/0/84/background_texture.png);
    --theme-page-bg-image-1024: url();
    --theme-page-bg-image-1921: url();
    --theme-page-bg-image-2561: url();
    --theme-table-row-bg-hover: #{darken($slug-secondarycolor, 10%)};
    --theme-table-row-bg-dark: #{$slug-secondarycolor};
    --theme-table-row-bg-light: #{lighten($slug-secondarycolor, 7%)};
    --compendium-rules-sidebar-color: #{lighten($slug-secondarycolor, 5%)};
    --compendium-quote-box-color: #{lighten($slug-primarycolor, 53%)};
    --compendium-quote-box-border: #{darken($slug-secondarycolor, 50%)};
    --compendium-quote-box-corner: #{darken($slug-secondarycolor, 50%)};
    --header-underline: #{$slug-primarycolor};
    --sidebar-active-border: #{$slug-primarycolor};
    --sidebar-hover-border: #{darken($slug-primarycolor, 10%)};
    --sidebar-active-bg: #{$slug-secondarycolor};
    --sidebar-hover-bg: #{darken($slug-secondarycolor, 8%)};
    --nav-active-text: #3c3c3c;
    --nav-hover-text: #1d1d1d;
    @include mixins.nav-red;
    --nav-to-top-bg: #{$slug-primarycolor};
    --nav-to-top-hover-bg: #{darken($slug-primarycolor, 10%)};
    --theme-image-caption-link-bg-color: #{$slug-primarycolor};
    --theme-image-caption-link-hover-color: #{darken($slug-primarycolor, 10%)};
    --compendium-button-bg: #{$slug-primarycolor};
    --compendium-button-hover-bg: #{darken($slug-primarycolor, 10%)};
    --compendium-link-contrast: #024687;
    @include mixins.new-tooltips;
}
@include mixins.hover-tooltips;
#{$for-contrast} {
    --compendium-default-tooltip: #056736;
    --compendium-rule-tooltip: #836000;
    --compendium-spell-tooltip: #5a35c5;
    --compendium-magicitem-tooltip: #054ea9;
    --compendium-monster-tooltip: #A70000;
    --compendium-condition-tooltip: #466501;
}
strong:not(ul strong, .flexible-double-column.hangingIndent strong, .epigraph strong),
li::marker {
    color: #{$slug-primarycolor}; 
}

.monster--stat-block {
    --stat-block-divider: #{$slug-primarycolor};
    --stat-block-bg-override: #{lighten($slug-secondarycolor, 7%)};
    //--stat-block-header-size: 18px;
    font-family: "Open Sans";
    .monster--stats p:nth-child(odd) {
        color: #{$slug-primarycolor};
    }
    .monster--action-header {
        font-family: "Open Sans";
        color: #{$slug-primarycolor};
    }
    &::before, &::after {
        //--stat-block-scrollbar: url("#{$media-stg}/slug/ui/file-name.png");
        --stat-block-scrollbar: none;
        background-color: #{$slug-primarycolor};
        left: -4px;
        right: -4px;
        border-radius: 8px;
        height: 8px;
    }
    /*&::after {
        transform: scaleY(-1);
    }*/
    /*.flexible-double-column & {
        --stat-block-scrollbar: url("#{$media-stg}/slug/ui/file-name.png");
    }
    @media (max-width: 760px) {
        --stat-block-scrollbar: url("#{$media-stg}/slug/ui/file-name.png");
    }*/
} 

/*.text--rules-sidebar {
    border-color: #204d4c;
    border-width: 5px;
    max-width: 600px;
    margin: 30px auto;
    padding: 18px 20px;
    filter: drop-shadow(0 3px 5px #ccc);
    p:first-of-type {
        color: #204d4c;
        font-size: 20px;
        + p {
            margin-top: 8px !important;
        }
    }
    &::after {
        all: unset;
    }
    &::before {
        content: "";
        background-image: url("https://media-stg.dndbeyond.com/compendium-images/fm/ui/sidebar-border.svg");
        background-position: 0, 100%;
        background-size: 100% 100%;
        background-repeat: no-repeat;
        height: 15px;
        top: -6px;
        left: -7px;
        right: -7px;
    }
}*/

/*.text--quote-box{
    //add custom quote box style here
}*/

//Add additional custom styles here

/* TTJenevers */
@font-face {
  font-family: "TT Jenevers";
  src: url("https://fonts.dndbeyond.com/TTJeneversRegular-5632637.otf");
  font-weight: 400;
  font-style: normal;
}
@font-face {
  font-family: "TT Jenevers";
  src: url("https://fonts.dndbeyond.com/TTJeneversItalic-5632639.otf");
  font-weight: 400;
  font-style: italic;
}
@font-face {
  font-family: "TT Jenevers";
  src: url("https://fonts.dndbeyond.com/TTJeneversMedium-5632641.otf");
  font-weight: 500;
  font-style: normal;
}
@font-face {
  font-family: "TT Jenevers";
  src: url("https://fonts.dndbeyond.com/TTJeneversBold-5632645.otf");
  font-weight: 700;
  font-style: normal;
}
@font-face {
  font-family: "TT Jenevers";
  src: url("https://fonts.dndbeyond.com/TTJeneversBoldItalic-5632647.otf");
  font-weight: 700;
  font-style: italic;
}

@font-face {
  font-family: "Mrs Eaves All Small Caps OT";
  src: url("https://fonts.dndbeyond.com/MrsEavesAllSmallCapsOT-a6a50f89-41ae-4f40-bfda-b0fc6f8744b0.otf_v.otf");
  font-weight: 400;
  font-style: normal;
}

@font-face {
  font-family: "Mrs Eaves OT";
  src: url("https://fonts.dndbeyond.com/MrsEavesOT-Bold-4d0707e4-2a3b-4e57-a6fa-a74c7c4eb352.otf_v.otf");
  font-weight: 700;
  font-style: normal;
}

@font-face {
  font-family: "Wolpe Pegasus";
  src: url("https://fonts.dndbeyond.com/WolpePegasusRegular-5521351.otf");
  font-weight: 400;
  font-style: normal;
}

@font-face {
  font-family: "Wolpe Pegasus";
  src: url("https://fonts.dndbeyond.com/WolpePegasusBold-5521342.otf");
  font-weight: 700;
  font-style: normal;
}


/* Scala Sans Offc */
@font-face {
  font-family: "Scala Sans Offc";
  src: url("https://fonts.dndbeyond.com/ScalaSansOffc-f34f269d-8464-48b4-b0e6-c0c2937ddb84.ttf_v.ttf");
  font-weight: 400;
  font-style: normal;
}
@font-face {
  font-family: "Scala Sans Offc";
  src: url("https://fonts.dndbeyond.com/ScalaSansOffcItalic-528aad9e-fdbf-4cca-8c7e-094ca41d88dc.ttf_v.ttf");
  font-weight: 400;
  font-style: italic;
}
@font-face {
  font-family: "Scala Sans Offc";
  src: url("https://fonts.dndbeyond.com/ScalaSansOffcBold-077eb635-4f4b-49cd-b62e-545088246eee.ttf_v.ttf");
  font-weight: 700;
  font-style: normal;
}
@font-face {
  font-family: "Scala Sans Offc";
  src: url("https://fonts.dndbeyond.com/ScalaSansOffcBoldItalic-4ffee848-75be-4b5f-9c02-7d644be2e718.ttf_v.ttf");
  font-weight: 700;
  font-style: italic;
}

@font-face {
  font-family: "Scala Sans SC Offc";
  src: url("https://fonts.dndbeyond.com/ScalaSansSCOffcBold-25813ff8-4562-40b4-a92a-32fce25e8eb5.TTF_v.TTF");
  font-weight: 700;
  font-style: normal;
}

@font-face {
  font-family: "Scala Sans SC Offc";
  src: url("https://fonts.dndbeyond.com/ScalaSansSCOffc-f6a98972-664f-45f8-a117-04a500ae5f10.TTF_v.TTF");
  font-weight: 400;
  font-style: normal;
}

@font-face {
  font-family: "Harbour";
  src: url("https://fonts.dndbeyond.com/HarbourMedium-6668989.ttf") format("truetype");
  font-weight: 500;
  font-style: normal;
  // font-display: swap;
}

h1 {
  font-family: "Scala Sans SC Offc", serif !important;
  font-size: 3rem !important;
  font-weight: 400 !important;
  line-height: normal;
    background: linear-gradient(0, #ff7a18, #4A0E0B 70%, #319197);
  letter-spacing: 0.06em;
  -webkit-background-clip: text; /* needed for Safari/Chrome */
  background-clip: text;
  color: transparent !important;              
  -webkit-text-fill-color: transparent !important;
 -webkit-text-stroke: 0.65px #C9D3CA; 
  @supports (-webkit-text-stroke: 1px black) {
    .title { -webkit-text-stroke: 2px #C9D3CA; }
  }
  text-align: center;
   --h1-underline: transparent; 


  --uf-max-height: 193; /*UNITLESS height of the actual background image file, NOT the resulting height, in px*/
  --uf-max-width: 4310; /*UNITLESS height of the actual background image file, NOT the resulting height, in px*/
  
}

h2 {
  font-family: "Scall Sans Offc", sans-serif;
  font-weight: 400;
  font-style: bold;
  color: #{$slug-primarycolor} !important;
  font-size: 2rem !important;
  line-height: 2.1rem;
  text-align: left;
    --h2-underline: #C3B272; 
}

h3 {
   font-family: "Scall Sans Offc", sans-serif;
  font-weight: 400;
  font-style: normal;
  font-size: 1.5rem !important;
  color: #{$slug-primarycolor} !important;
  line-height: 1.45rem;
  text-align: left;
  --h3-underline: #C3B272; 
}

h4 {
   font-family: "Scall Sans Offc", sans-serif;
  font-weight: 400;
  font-style: normal;
  font-size: 0.85rem;
  line-height: 0.8rem;
  color: #{$slug-primarycolor} !important;
  text-align: left;
}


p {
  font-family: "Scala Sans Offc" !important;
  font-size: 1.1rem;

}

.frhof-aside-location-box__header  {
  margin: 0 !important;
  background-color: #724E4B;
  font-variant: small-caps;
  color: white !important;
    --location-box-border-radius: 0.1rem;
  border-top-left-radius: var(--location-box-border-radius);
  border-top-right-radius: var(--location-box-border-radius);
  padding: 1.25rem 0.5rem 0.75rem 0.5rem !important;
  position: relative;
    font-size: 3rem !important;
    font-weight: 500 !important;
}

.frhof-aside-location-box__header span {
  position: relative;
  z-index: 1;
}

.frhof-aside-location-box__header::before {
  content: "";
  pointer-events: none;
  position: absolute;
  inset: 0;
  box-shadow: inset 12px 8px 16px 0 #292929;
  opacity: 0.4;

  mix-blend-mode: multiply;
    border-top-left-radius: var(--location-box-border-radius);
  border-top-right-radius: var(--location-box-border-radius);
  z-index: 0;

}

.frhof-aside-location-box__header::after  {
 display: none !important;
 margin: 0 !important;
}

.frhof-aside-location-box {
  background-color: #E6ECD4;
  position: relative;
  mix-blend-mode: multiply;
  padding: .5rem 1rem 0.15rem 1rem;
  border-bottom-left-radius: var(--location-box-border-radius);
  border-bottom-right-radius: var(--location-box-border-radius);
  opacity: 1;
  margin-bottom: 12px;

  --uf-image: url("./frhof-location-header-block-footer-filigree.png");
  
  --uf-max-height: 193; /*UNITLESS height of the actual background image file, NOT the resulting height, in px*/
  --uf-max-width: 4310; /*UNITLESS height of the actual background image file, NOT the resulting height, in px*/
  
  --uf-height: 2.25rem; 
}

.frhof-aside-location-box::before {
  content: "";
  pointer-events: none;
  position: absolute;
  inset: 0;
  box-shadow: inset 8px 4px 48px 8px #99b153;
  opacity: 0.25;
  mix-blend-mode: multiply;
    border-bottom-left-radius: var(--location-box-border-radius);
  border-bottom-right-radius: var(--location-box-border-radius);
  z-index: 0;
}   

.frhof-aside-location-box p {
    z-index: 1;
    position: relative;
}


.frhof-aside-location-box p:first-child {
  font-size: 1.4rem;
    font-variant: small-caps;
}

.frhof-aside-location-box p:last-child {
  margin-bottom: 0 !important;
}

.underline-filigree {
  /* Defaults (override globally, per-theme, or per-element) */
  --uf-image-default: url('./frhof-chapter-title-block-footer-filigree.png');
  --uf-image: var(--uf-image-default);

  --uf-max-height: 193; /*UNITLESS height of the actual background image file, NOT the resulting height, in px*/
  --uf-max-width: 4310; /*UNITLESS height of the actual background image file, NOT the resulting height, in px*/
  
  --uf-height: 2.25rem;   /* visual height of the ornament (scales with font-size) */
  --uf-aspect-ratio: calc(var(--uf-max-width) / var(--uf-max-height)) ;           /* aspect ratio (width / height). e.g., 4 ⇒ 4:1 */
  --uf-gap: 0.35em;     /* space between text baseline and ornament */
}

/* The ornament lives in ::after so it won’t interfere with element styling */
.underline-filigree::after {
  content: "";
  display: block;

  /* Size: height + aspect-ratio computes width without distortion */
  height: var(--uf-height) !important;
  aspect-ratio: var(--uf-aspect-ratio);

  /* Center under the text (can be changed with helpers below) */
  margin: var(--uf-gap) auto 0;
  max-width: 100%;

  /* Draw the filigree */
  background-image: var(--uf-image);
  background-repeat: no-repeat;
  background-position: center;
  background-size: 100% 100%;

  /* purely decorative */
  pointer-events: none;
}

.inline-filigree {
  --fg-left-default: url('./frhof-chapter-title-block-header-filigree-l.png');
  --fg-right-default: url('./frhof-chapter-title-block-header-filigree-r.png');

  --fg-left: var(--fg-left-default);
  --fg-right: var(--fg-right-default);

  --fg-height: 2em;
  --fg-gap: 0.5rem;
  --fg-left-aspect-ratio: 3.38;
  --fg-right-aspect-ratio: 3.38;
  --fg-y: 0;

  position: relative;
  display: inline-flex;
  align-items: flex-end;
  gap: var(--fg-gap);
}
.inline-filigree::before,
.inline-filigree::after {
  content: "";
  display: inline-block;
  height: var(--fg-height);
  translate: 0 var(--fg-y);
  background-repeat: no-repeat;
  background-position: center;
  background-size: contain;
}
.inline-filigree::before {
  background-image: var(--fg-left);
  width: calc(var(--fg-height) * var(--fg-left-aspect-ratio));
}
.inline-filigree::after {
  background-image: var(--fg-right);
  width: calc(var(--fg-height) * var(--fg-right-aspect-ratio));
}

.fraif-chapter-number-container {
  width: 100%;
  display: flex;
  justify-content: center;
}

.fraif-chapter-number {
  font-family: "Wolpe Pegasus", sans-serif;
  font-weight: 600;
  font-style: normal;
  font-size: 1.5rem;
  line-height: normal;
  color: #484849;
  -webkit-text-stroke: 0.45pt #cccec3;
  text-shadow: none;
  text-align: end;
  width: unset !important;

    --fg-left-default: url('./frhof-chapter-title-block-header-filigree-l.png');
  --fg-right-default: url('./frhof-chapter-title-block-header-filigree-r.png');

  --fg-height: 2rem;
  --fg-gap: 0.5rem;
  --fg-left-aspect-ratio: 3.38;
  --fg-right-aspect-ratio: 3.38;
  --fg-y: 0;
  position: relative;
  margin: 0 auto !important;
}

.gazeteer-quote {
  width: 100%;
  padding: 1rem 2rem;
  --gazeteer-quote-image: url("./fraif-mag-quote-attribution-brown.png");
  --attribition-font-size: 0.9rem;
   --attribition-font-size-mobile: 0.7rem;
}

/* base quote text */
.gazeteer-quote p {
  font-family: Harbour !important;
  font-size: 1.5rem !important;
  line-height: 2.2rem;
  color: #4F5663 !important;
  text-align: center;
  text-wrap: balance;
  margin: 0;
}
.gazeteer-quote p + p { margin-top: .5rem; }

/* attribution badge (last <p>) */
.gazeteer-quote .gazeteer-cite {
  /* size + placement controls */
  --h: 1.5rem;  /* badge width */
  --x-left: 56;
  --x-right: 28; 
  --x-left-tablet: 54;
  --x-right-tablet: 34;                        /* % from left for text anchor */
  --y: 20;               
  --y-mobile: 40;          /* % from top for text anchor */
  --aspect-ratio: 30.1;

  height: var(--h);
  aspect-ratio: var(--aspect-ratio);
  position: relative;
  // margin: .5rem auto 0;

  /* keep real text in DOM but hide visually */
  font-size: 0.9rem !important;
  line-height: 0.9rem;
  color: transparent !important;
  user-select: text;

  @media (min-width: 750px) and (max-width: 1024px) {
    --x-left: var(--x-left-tablet);
    --x-right: var(--x-right-tablet);
  }
}

/* filigree art layer */
.gazeteer-quote .gazeteer-cite::before {
  content: "";
  position: absolute;
  inset: 0;
  background: var(--gazeteer-quote-image) center / contain no-repeat;
  pointer-events: none;
}

/* positioned citation text layer */
.gazeteer-quote .gazeteer-cite::after {
  content: "— " attr(data-by);
  text-transform: uppercase;
  position: absolute;
  top:  calc(var(--y) * 1%);
  left: calc(var(--x-left) * 1%);
  right: calc(var(--x-right) * 1%);
  text-align: center;
  // transform: translate(-50%, -50%); /* center on the anchor point */
  font: 500 var(--attribition-font-size)/1 Harbour, serif;
  color: #4F5663;
  white-space: nowrap;
  pointer-events: none;

  @media (max-width: 600px) {
    font-size: var(--attribition-font-size-mobile);
     top:  calc(var(--y-mobile) * 1%);
    // left: 0;
    // right: 0;
  }

  /* optional legibility helpers */
}